<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoForumContent</title>
    <link rel="stylesheet" type="text/css" href="css/forumstyle.css" >
</head>
<body>
    <div class="forum-top">
        <h1>
            EcoForum
        </h1>
    </div>
    <div class="content-main">
        <div class="header">
            
        </div>
        <textarea>
            Add your thoughts.....
        </textarea>
        <button>Start Discussion</button>
        <div  class="comments">
            
        </div>
    </div>
    <script src="\js\forum.js"></script>

<script>
    var id=window.location.search.slice(1);
    var thread=threads.find(t=>t.id==id);
    var header=document.querySelector('.header');
    var headerhtml=`
                <h3 class="title">
                    ${threads.title}
                </h3>
                <div class="cbody">
                    <p>
                        ${new Date(threads.date).toLocaleString()}
                    </p>
                </div>
        `
        header.insertAdjacentHTML('beforeend',headerhtml)

        function adddiscussion(comment){
            var commentHtml=`
                <div class="comment">
                    <div class="dtop">
                        <p>
                            ${discussion.author}
                        </p>
                        <p>
                            ${new Date(comment.date).toLocaleString()}
                        </p>
                    </div>
                    <div class="ccontent">
                        ${comment.content}
                    </div>
                </div>
            `
            comments.insertAdjacentHTML('beforeend', commentHtml);
        }

        var comments=document.querySelector('.comments');
        for (let comment of thread.comments){
            adddiscussion(comment);
        }

        var btn=document.querySelector('button');
        btn.addEventListener('click',function(){
            var comment={
                content: txt.value,
                date: Date.now(),
                author:'EcoAuthor'
            }
            adddiscussion(comment);
            txt.value='';
            thread.comments.push(comment);
            //Setting local storage
            localStorage.setItem('threads',JSON.stringify(threads));
        })
</script>
</body>


</html>